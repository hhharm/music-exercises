<header class="app-header">
	<h1>Упражнения на музыкальный слух</h1>
</header>

<nav class="app-nav">
	<!-- <ng-container *ngTemplateOutlet="piano"> -->
	<!-- </ng-container> -->
	<ng-container>
		<ng-container *ngFor="let exercise of exercises | keyvalue">
			<ng-container *ngTemplateOutlet="taskCard; context: {$implicit: exercise.value}">
			</ng-container>
		</ng-container>
	</ng-container>
</nav>

<main class="app-main">
	<ng-container *ngTemplateOutlet="exercise">
	</ng-container>
</main>

<div class="app-aside" *ngIf="counter.total">
	<p>Правильных ответов: <span class="_important">{{counter.correct}}</span> из <span>{{counter.total}}</span></p>
</div>

<footer class="app-footer">(c) {{today| date: 'YYYY' }}</footer>

<ng-template #taskCard let-exercise>
	<button class="app__exrcs-card" (click)="chooseExercise(exercise)">
		{{exercise.name}}
	</button>
</ng-template>

<ng-template #exerciseUpDown>
	<div class="app__exrcs">
		<div>
			<div class="app__exrcs-question-area">
				<p class="app__exrcs-question">Куда идёт мелодия?</p>
				<div class="app__exrcs-answers">
					<button class="btn btn-answer"
          [class._disabled]="answeredAtLeastOnce"
           (click)="checkCorrectUpDown(true)">Вверх</button>
					<button class="btn btn-answer"
          [class._disabled]="answeredAtLeastOnce"
          (click)="checkCorrectUpDown(false)">Вниз</button>
				</div>
			</div>
		</div>
		<section class="app__exrcs-rule-buttons">
			<button class="btn"
          [class._active]="answeredAtLeastOnce"
          (click)="repeat()">Повторить</button>
			<button class="btn"
          [class._active]="answeredAtLeastOnce"
           (click)="upDownExercise()">Следующая мелодия</button>
		</section>
		<section class="app_exrcs-answer" [class._correct]="isCorrect">
			{{answer}}
		</section>
	</div>
</ng-template>

<ng-template #whichNote>
	<div class="app__exrcs">
		<div>
			<div class="app__exrcs-question-area">
				<p class="app__exrcs-question">Какая это нота?</p>
				<div class="app__exrcs-answers">
					<button *ngFor="let note of allNotes"
          class="btn btn-answer  _small"
          [class._disabled]="answeredAtLeastOnce"
           (click)="checkCorrectWhichNote(note)">{{getNoteName(note)}}</button>
				</div>
			</div>
		</div>
		<section class="app__exrcs-rule-buttons">
			<button class="btn"
          [class._active]="answeredAtLeastOnce"
          (click)="repeat()">Повторить</button>
			<button class="btn"
          [class._active]="answeredAtLeastOnce"
           (click)="whichNoteExercise()">Следующая нота</button>
		</section>
		<section class="app_exrcs-answer" [class._correct]="isCorrect">
			{{answer}}
		</section>
	</div>
</ng-template>

<ng-template #piano>
	<svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="300px" height="300px"
		viewBox="0 0 572.000000 358.000000" preserveAspectRatio="xMidYMid meet">

		<g transform="translate(0.000000,358.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
			<path
				d="M450 2565 l0 -1015 165 0 165 0 2 -772 3 -773 5 770 5 770 73 3 72 3 0 1014 0 1015 -245 0 -245 0 0 -1015z m354 -208 c2 -44 -1 -77 -6 -77 -5 0 -7 -9 -3 -20 3 -11 2 -28 -4 -37 -9 -15 -10 -12 -11 16 0 29 -2 32 -15 21 -8 -7 -15 -26 -15 -43 0 -24 -3 -28 -12 -19 -15 15 -15 199 0 214 9 9 12 6 12 -15 0 -17 5 -27 15 -27 11 0 15 11 15 42 0 74 21 27 24 -55z m-104 47 c0 -13 -7 -15 -29 -11 -15 3 -37 4 -48 1 -19 -5 -53 -61 -53 -88 0 -27 43 -66 88 -80 l47 -15 -43 0 c-100 -2 -149 67 -107 149 19 37 59 59 108 60 28 0 37 -4 37 -16z" />
			<path d="M757 2343 c-4 -3 -7 -20 -7 -36 0 -25 2 -28 15 -17 8 7 15 23 15 36 0 23 -10 31 -23 17z" />
			<path
				d="M1410 2565 l0 -1014 83 -3 82 -3 5 -770 5 -770 3 773 2 772 155 0 155 0 0 1015 0 1015 -245 0 -245 0 0 -1015z m354 -208 c2 -44 -1 -77 -6 -77 -5 0 -7 -9 -3 -20 3 -11 2 -28 -4 -37 -9 -15 -10 -12 -11 16 0 29 -2 32 -15 21 -8 -7 -15 -26 -15 -43 0 -24 -3 -28 -12 -19 -7 7 -11 47 -11 107 0 60 4 100 11 107 9 9 12 6 12 -15 0 -17 5 -27 15 -27 11 0 15 11 15 42 0 74 21 27 24 -55z m-134 53 c28 -15 40 -62 27 -106 -13 -43 -74 -87 -115 -82 -26 3 -27 6 -30 68 -2 36 0 80 3 98 6 30 8 32 51 32 25 0 54 -4 64 -10z" />
			<path d="M1717 2343 c-4 -3 -7 -20 -7 -36 0 -25 2 -28 15 -17 8 7 15 23 15 36 0 23 -10 31 -23 17z" />
			<path
				d="M1556 2385 c-12 -31 -7 -135 7 -135 18 1 48 26 62 52 9 19 5 62 -9 85 -1 1 -13 4 -27 8 -19 5 -28 2 -33 -10z" />
			<path d="M2405 1795 c0 -984 1 -1386 2 -892 2 494 2 1300 0 1790 -1 491 -2 87 -2 -898z" />
			<path
				d="M2850 2565 l0 -1015 195 0 195 0 2 -772 3 -773 5 770 5 770 43 3 42 3 0 1015 0 1014 -245 0 -245 0 0 -1015z m363 -217 c-3 -16 0 -34 6 -42 8 -10 9 -16 1 -21 -5 -3 -10 -20 -10 -36 0 -18 -4 -28 -10 -24 -5 3 -10 15 -10 26 0 11 -4 17 -10 14 -5 -3 -10 -19 -10 -35 0 -16 -4 -32 -10 -35 -10 -6 -15 35 -11 94 1 20 -3 37 -11 42 -10 7 -10 11 0 21 6 6 12 25 12 41 0 16 4 26 10 22 6 -3 10 -15 10 -26 0 -10 5 -19 10 -19 6 0 10 15 10 33 0 19 3 37 8 41 10 10 21 -63 15 -96z m-98 62 c4 -6 -13 -10 -45 -10 l-51 0 3 -32 c2 -27 8 -34 28 -36 42 -6 47 -22 7 -22 -35 0 -37 -2 -37 -32 0 -18 -5 -40 -10 -48 -17 -26 -30 8 -30 80 0 106 3 110 71 110 32 0 61 -4 64 -10z" />
			<path d="M3178 2344 c-5 -4 -8 -21 -8 -38 0 -21 3 -27 11 -19 6 6 9 23 7 38 -2 15 -6 23 -10 19z" />
			<path
				d="M3810 2565 l0 -1015 135 0 135 0 2 -772 3 -773 5 770 5 770 103 3 102 3 0 1014 0 1015 -245 0 -245 0 0 -1015z m384 -208 c2 -43 -1 -77 -5 -77 -5 0 -7 -11 -3 -24 3 -13 1 -27 -5 -30 -7 -5 -11 3 -11 20 0 22 -2 25 -15 14 -8 -7 -15 -26 -15 -43 0 -24 -3 -28 -12 -19 -7 7 -11 47 -11 107 0 60 4 100 11 107 9 9 12 6 12 -15 0 -17 5 -27 15 -27 11 0 15 11 15 42 0 74 21 27 24 -55z m-104 47 c0 -13 -7 -15 -37 -11 -48 8 -84 -9 -96 -46 -14 -44 -1 -76 38 -93 49 -20 55 -18 55 21 0 24 5 35 15 35 11 0 15 -12 15 -45 l0 -45 -46 0 c-84 0 -130 49 -115 121 10 47 59 79 122 79 39 0 49 -3 49 -16z" />
			<path d="M4147 2343 c-4 -3 -7 -20 -7 -36 0 -25 2 -28 15 -17 8 7 15 23 15 36 0 23 -10 31 -23 17z" />
			<path
				d="M4770 2566 l0 -1015 53 -3 52 -3 5 -770 5 -770 3 773 2 772 185 0 185 0 0 1015 0 1015 -245 0 -245 0 0 -1014z m414 -209 c2 -43 -1 -77 -5 -77 -5 0 -7 -11 -3 -24 3 -13 1 -27 -5 -30 -7 -5 -11 3 -11 20 0 22 -2 25 -15 14 -8 -7 -15 -26 -15 -43 0 -24 -3 -28 -12 -19 -7 7 -11 47 -11 107 0 60 4 100 11 107 9 9 12 6 12 -15 0 -17 5 -27 15 -27 11 0 15 11 15 42 0 74 21 27 24 -55z m-144 -21 c22 -47 40 -92 40 -101 0 -30 -32 -11 -44 25 -9 30 -16 35 -46 37 -40 3 -60 -10 -77 -49 -8 -17 -20 -28 -33 -28 -17 0 -11 14 41 100 34 55 65 100 70 100 5 0 27 -38 49 -84z" />
			<path d="M5137 2343 c-4 -3 -7 -20 -7 -36 0 -25 2 -28 15 -17 8 7 15 23 15 36 0 23 -10 31 -23 17z" />
			<path d="M4967 2342 c-24 -26 -21 -32 13 -32 31 0 35 6 24 34 -8 21 -17 20 -37 -2z" />
			<path
				d="M317 696 c-44 -16 -53 -23 -44 -33 4 -4 13 -1 19 5 17 17 90 15 116 -4 20 -14 23 -14 28 1 4 9 3 20 -2 25 -17 17 -79 20 -117 6z" />
			<path
				d="M1045 702 c-3 -3 -5 -90 -5 -194 l0 -189 23 7 c48 15 133 64 158 91 50 55 63 86 63 144 1 102 -62 152 -183 148 -28 -1 -53 -4 -56 -7z m155 -38 c77 -46 82 -160 10 -235 -21 -22 -80 -55 -112 -63 -25 -6 -28 -3 -34 31 -8 41 1 256 11 273 10 16 94 12 125 -6z" />
			<path
				d="M1892 702 c-9 -7 -12 -51 -10 -188 l3 -179 75 -3 c89 -4 120 3 120 24 0 14 -11 15 -84 9 -81 -6 -83 -6 -89 17 -8 29 -8 76 -1 106 5 19 13 22 54 22 27 0 55 3 64 6 32 12 15 24 -36 24 -74 0 -82 8 -83 77 l0 58 84 5 c55 3 86 9 89 18 3 9 -18 12 -85 12 -48 0 -94 -4 -101 -8z" />
			<path
				d="M2733 703 c-16 -6 -19 -363 -3 -363 6 0 10 28 10 63 0 102 4 107 65 107 35 0 57 5 65 15 11 13 5 15 -41 15 -30 0 -60 4 -67 8 -16 11 -27 73 -18 106 6 25 9 26 91 26 69 0 85 3 85 15 0 12 -16 15 -87 14 -49 0 -94 -3 -100 -6z" />
			<path
				d="M3675 704 c-105 -25 -161 -82 -172 -175 -7 -62 9 -101 58 -140 38 -30 125 -59 179 -59 39 0 50 23 50 109 0 93 -18 92 -22 -1 l-3 -73 -50 0 c-58 1 -138 37 -168 77 -25 34 -26 104 -2 153 28 56 82 85 162 85 34 0 64 -4 67 -9 3 -5 15 -11 26 -14 15 -4 20 0 20 13 0 12 -10 20 -27 24 -55 11 -98 14 -118 10z" />
			<path
				d="M4474 678 c-9 -18 -20 -35 -24 -38 -10 -7 -51 -74 -100 -165 -24 -44 -52 -93 -63 -109 -16 -23 -17 -30 -6 -37 14 -9 39 14 39 36 0 17 38 88 52 97 7 4 57 8 110 8 l98 0 20 -40 c11 -21 20 -51 20 -65 0 -27 6 -30 29 -16 11 7 7 24 -26 93 -82 168 -94 194 -104 230 -12 47 -23 48 -45 6z m54 -86 c18 -37 32 -73 32 -80 0 -8 -24 -12 -85 -12 -78 0 -85 2 -85 20 0 11 4 20 8 20 4 0 24 27 43 60 18 33 39 60 45 60 6 0 25 -30 42 -68z" />
			<path
				d="M5160 527 c0 -104 4 -188 9 -192 12 -7 96 13 138 32 40 19 67 72 58 114 -10 43 -76 83 -133 80 l-43 -3 3 59 c3 57 3 58 35 61 43 4 83 -23 83 -56 0 -24 1 -25 16 -10 20 20 11 53 -19 73 -12 7 -50 17 -84 21 l-63 7 0 -186z m140 -14 c33 -22 40 -33 40 -64 0 -36 -40 -76 -84 -84 -61 -12 -66 -5 -66 85 l0 80 43 0 c24 0 54 -8 67 -17z" />
			<path
				d="M212 614 c-74 -111 -47 -224 65 -271 63 -27 173 -38 173 -19 0 11 -15 13 -65 11 -36 -2 -65 1 -65 6 0 5 -8 9 -17 9 -18 1 -58 31 -82 62 -37 48 -31 152 11 209 12 16 19 31 16 34 -3 3 -19 -15 -36 -41z" />
		</g>
	</svg>
</ng-template>